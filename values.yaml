nfs:
  path: "/opt/nfs"
  server: "172.20.42.94"

mysql:
  enabled: true
  replicas: 1
  persistentVolume:
    enabled: true
    size: 10Gi
    storageClass: nfs-storage
  image:
    image: "registry.kylincloud.org:4001/solution/ha/mysql/arm64/mysql:5.7"
  initImage:
    image: "registry.kylincloud.org:4001/solution/ha/mysql/arm64/mysql:5.7"

#etcd:
#  enabled: false
#  replicaCount: 3
#  nodeAffinityPreset:
#    values: ["master1", "master2", "master3"]
#  persistence:
#    storageClassName: nfs-storage
#  image:
#    registry: "registry.kylincloud.org:4001"
#    repository: solution/ha/etcd/arm64/etcd
#    tag: v3.4.13

elasticsearch:
  enabled: true
  initContainer:
    image:
      image: "registry.kylincloud.org:4001/solution/deploy/arm64/busybox:1.28"
  replicaCount: 3
  persistence:
    enabled: true
    storageClass: nfs-storage
  nfs:
    enable: false
  image:
    image: "registry.kylincloud.org:4001/solution/ha/elasticsearch/arm64/elasticsearch:7.9.1"

apisix:
  enabled: false
  replicaCount: 1
  apisix:
    image:
      image: "registry.kylincloud.org:4001/solution/ha/apisix/arm64/apisix:2.10.4-alpine"
    initImage:
      image: "registry.kylincloud.org:4001/solution/deploy/arm64/busybox:1.28"
  etcd:
    enabled: true
    host:
      - "http://apisix-etcd.apisix-system.svc.cluster.local:2379"  # host or ip e.g. http://172.20.128.89:2379
    prefix: "/apisix"
    timeout: 30
    replicaCount: 3
    nodeAffinityPreset:
      values: ["master1", "master2", "master3"]
    image:
      image: "registry.kylincloud.org:4001/solution/ha/etcd/arm64/etcd:v3.4.13"
  ingress-controller:
    enabled: true
    config:
      apisix:
      #【注意】一定要设置 gateway 所在的 namespace
        serviceNamespace: apisix-system
    serviceMonitor:
      enabled: true
      namespace: 'apisix-system'
      interval: 15s
    image:
      image: "registry.kylincloud.org:4001/solution/ha/apisix/arm64/apisix-ingress-controller:1.4.0"
    initContainer:
      image: "registry.kylincloud.org:4001/solution/deploy/arm64/busybox:1.28"
  dashboard:
    image:
      image: "registry.kylincloud.org:4001/solution/ha/apisix/arm64/apisix-dashboard:2.9.0"


mongodb:
  enabled: true
  image:
    image: "registry.kylincloud.org:4001/solution/ha/mongodb/arm64/mongo:4.4.2"
  sidecar:
    image:
      image: "registry.kylincloud.org:4001/solution/ha/mongodb/arm64/mongo-k8s-sidecar:20220217"
  job:
    image:
      image: "registry.kylincloud.org:4001/solution/ha/mongodb/arm64/mongo:4.4.2"
  replicaCount: 3
  persistence:
    enabled: true
    storageClassName: nfs-storage
  nfs:
    enable: false

redis-ha:
  enabled: true
  image:
    image: "registry.kylincloud.org:4001/solution/ha/redis/arm64/redis:5.0.12-alpine"
  replicas: 3
  persistentVolume:
    enabled: true
    size: 10Gi
    storageClass: nfs-storage
  redis:
    customConfig: |
      dir "/data"
      port 6379
      maxmemory 0
      maxmemory-policy volatile-lru
      min-replicas-max-lag 5
      min-replicas-to-write 1
      rdbchecksum yes
      rdbcompression yes
      repl-diskless-sync yes
      save 900 1
      requirepass replace-default-auth
      masterauth replace-default-auth
  haproxy:
    enabled: true
    replicas: 3
    image:
      image: "registry.kylincloud.org:4001/solution/ha/redis/arm64/haproxy:2.0.4"
  auth: true
  # 不能使用特殊字符@#$等，最好使用字母+数字
  redisPassword: kylin123.

minio:
  enabled: true
  mode: distributed
  image:
    image: "registry.kylincloud.org:4001/solution/ha/minio/arm64/minio:RELEASE.2021-02-14T04-01-33Z"
  mcImage:
    image: "registry.kylincloud.org:4001/solution/ha/minio/arm64/mc:RELEASE.2021-02-14T04-28-06Z"
  accessKey: "admin"
  secretKey: "12341234"
  service:
    type: NodePort
    nodePort: 32000
  persistence:
    enabled: true
    storageClass: "nfs-storage"

#repo:
#  enabled: false
global:
  images:
    mysqlJob:                     "registry.kylincloud.org:4001/solution/dbinit/arm64/mysql-job:0228"
    busybox:                      "registry.kylincloud.org:4001/solution/deploy/arm64/busybox:1.28"
    apisix:                       "registry.kylincloud.org:4001/solution/ha/apisix/arm64/apisix:2.10.4-alpine"
    apisixDashboard:              "registry.kylincloud.org:4001/solution/ha/apisix/arm64/apisix-dashboard:2.9.0"
    apisixIngressController:      "registry.kylincloud.org:4001/solution/ha/apisix/arm64/apisix-ingress-controller:1.4.0"
    elasticsearch:                "registry.kylincloud.org:4001/solution/ha/elasticsearch/arm64/elasticsearch:7.9.1"
    etcd:                         "registry.kylincloud.org:4001/solution/ha/etcd/arm64/etcd:v3.4.13"
    mc:                           "registry.kylincloud.org:4001/solution/ha/minio/arm64/mc:RELEASE.2021-02-14T04-28-06Z"
    minio:                        "registry.kylincloud.org:4001/solution/ha/minio/arm64/minio:RELEASE.2021-02-14T04-01-33Z"
    mongo:                        "registry.kylincloud.org:4001/solution/ha/mongodb/arm64/mongo:4.4.2"
    mongoK8sSidecar:              "registry.kylincloud.org:4001/solution/ha/mongodb/arm64/mongo-k8s-sidecar:20220217"
    mysql:                        "registry.kylincloud.org:4001/solution/ha/mysql/arm64/mysql:5.7"
    haproxy:                      "registry.kylincloud.org:4001/solution/ha/redis/arm64/haproxy:2.0.4"
    redis:                        "registry.kylincloud.org:4001/solution/ha/redis/arm64/redis:5.0.12-alpine"
    sourceinfo:                   "registry.kylincloud.org:4001/solution/mirrors-update/arm64/sourceinfo:v1.2"
    repoDynflow:                  "registry.kylincloud.org:4001/solution/repo/arm64/repo-dynflow:v3"
    repoManageProxy:              "registry.kylincloud.org:4001/solution/repo/arm64/repo-manage-proxy:v1"
    repoManage:                   "registry.kylincloud.org:4001/solution/repo/arm64/repo-manage:v3"
    repoStore:                    "registry.kylincloud.org:4001/solution/repo/arm64/repo-store:v2"
    repoStoreWorker:              "registry.kylincloud.org:4001/solution/repo/arm64/repo-store-worker:v2"
    client:                       "registry.kylincloud.org:4001/solution/softshop/arm64/client:2.1.0-x86"
    manage:                       "registry.kylincloud.org:4001/solution/softshop/arm64/manage:2.1.0-x86"
    authoapiService:              "registry.kylincloud.org:4001/solution/tianyu/arm64/authoapi-service:3.6.2"
    authorpcService:              "registry.kylincloud.org:4001/solution/tianyu/arm64/authorpc-service:3.6.2.1"
    httpd:                        "registry.kylincloud.org:4001/solution/tianyu/arm64/httpd:2.4"
    kubeWebhookCertgen:           "registry.kylincloud.org:4001/solution/tianyu/arm64/kube-webhook-certgen:v1.5.1"
    logstash:                     "registry.kylincloud.org:4001/solution/tianyu/arm64/logstash:7.9.1"
    monitorSync:                  "registry.kylincloud.org:4001/solution/tianyu/arm64/monitor-sync:3.6.0.8"
    nfsClientProvisioner:         "registry.kylincloud.org:4001/solution/tianyu/arm64/nfs-client-provisioner:20220217"
    nginx:                        "registry.kylincloud.org:4001/solution/tianyu/arm64/nginx:1.19.2"
    policyService:                "registry.kylincloud.org:4001/solution/tianyu/arm64/policy-service:3.6.2.1"
    registerService:              "registry.kylincloud.org:4001/solution/tianyu/arm64/register-service:3.6.2.1"
    serverService:                "registry.kylincloud.org:4001/solution/tianyu/arm64/server-service:3.6.2.1"
    ssmwebsite:                   "registry.kylincloud.org:4001/solution/tianyu/arm64/ssmwebsite:3.6.0-7-ICBC"
